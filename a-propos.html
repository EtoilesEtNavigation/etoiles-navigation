<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Étoiles et Navigation - Un petit traité de navigation astronomique par Jean-Clément Louche">
    <title>Étoiles et Navigation - Navigation Astronomique</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            overflow-x: hidden;
            transition: background-color 0.6s ease, color 0.6s ease;
        }

        :root {
            --bg-night: #0b1a2e;
            --header-bg: #0f1e2f;
            --nav-bg: #142c44;
            --accent-orange: #e67e22;
            --text-light: #ecf0f1;
            --text-muted: #bdc3c7;
            --gold-star: #d4a017;
            --card-bg: #1a2b3d;
            --card-border: #2c5aa0;
            --body-bg: var(--bg-night);
        }

        [data-theme="light"] {
            --bg-night: #f5f8fa;
            --header-bg: #e6f0fa;
            --nav-bg: #1a3a52;
            --accent-orange: #f39c12;
            --text-light: #2c3e50;
            --text-muted: #7f8c8d;
            --gold-star: #b8860b;
            --card-bg: #ffffff;
            --card-border: #1a3a52;
            --body-bg: #f8f9fa;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.7;
            color: var(--text-light);
            background-color: var(--body-bg);
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(120, 119, 198, 0.08) 0%, transparent 50%);
            background-attachment: fixed;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: 
                radial-gradient(2px 2px at 20% 30%, var(--gold-star), transparent),
                radial-gradient(1.5px 1.5px at 80% 70%, var(--gold-star), transparent),
                radial-gradient(1px 1px at 40% 90%, var(--gold-star), transparent),
                radial-gradient(1.8px 1.8px at 60% 20%, var(--gold-star), transparent);
            background-size: 200px 200px, 300px 300px, 250px 250px, 350px 350px;
            background-position: 0 0, 50px 50px, 100px 100px, 150px 150px;
            opacity: 0.6;
            pointer-events: none;
            z-index: -1;
            animation: stars-move 120s linear infinite;
        }

        [data-theme="light"]::before { opacity: 0; }

        @keyframes stars-move {
            from { background-position: 0 0, 50px 50px, 100px 100px, 150px 150px; }
            to { background-position: 200px 200px, 250px 250px, 350px 350px, 400px 400px; }
        }

        /* === HEADER === */
        header {
            position: relative;
            height: 280px;
            min-height: 280px;
            background-image: url('https://etoilesetnavigation.github.io/etoiles-navigation/images/fondbandeau.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            background-color: var(--header-bg);
            padding: 1.5rem 1rem;
            text-align: center;
            color: white;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            justify-content: center;
            overflow: hidden;
        }

        @supports (background-image: url('*.webp')) {
            header { background-image: url('https://etoilesetnavigation.github.io/etoiles-navigation/images/fondbandeau.webp'); }
        }

        .header-stars {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            z-index: 1;
            opacity: 0;
            transition: opacity 0.8s ease;
        }

        [data-theme="dark"] .header-stars,
        body:not([data-theme]) .header-stars {
            opacity: 1;
        }

        .header-star {
            position: absolute;
            color: var(--gold-star);
            font-size: 1.1rem;
            animation: twinkle 3s infinite;
            opacity: 0.7;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.4; transform: scale(1); }
            50% { opacity: 0.9; transform: scale(1.3); }
        }

        .header-clouds {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            z-index: 0;
            opacity: 0;
            transition: opacity 1s ease;
        }

        [data-theme="light"] .header-clouds {
            opacity: 1;
        }

        .cloud {
            position: absolute;
            background: rgba(255, 255, 255, 0.65);
            border-radius: 100px;
            filter: blur(12px);
            animation: drift 60s linear infinite;
            box-shadow: 
                0 10px 25px rgba(0,0,0,0.06),
                inset 0 2px 5px rgba(255,255,255,0.7);
            opacity: 0.6;
        }

        .cloud::before,
        .cloud::after {
            content: '';
            position: absolute;
            background: inherit;
            border-radius: 100px;
            filter: inherit;
            box-shadow: inherit;
            opacity: 0.8;
        }

        .cloud.large { width: 150px; height: 48px; top: 12%; }
        .cloud.large::before { width: 75px; height: 75px; top: -38px; left: 22px; }
        .cloud.large::after { width: 95px; height: 65px; top: -28px; right: 18px; }

        .cloud.medium { width: 110px; height: 38px; top: 22%; opacity: 0.55; }
        .cloud.medium::before { width: 55px; height: 55px; top: -28px; left: 16px; }
        .cloud.medium::after { width: 70px; height: 48px; top: -22px; right: 12px; }

        .cloud.small { width: 85px; height: 30px; top: 32%; opacity: 0.5; }
        .cloud.small::before { width: 42px; height: 42px; top: -22px; left: 11px; }
        .cloud.small::after { width: 55px; height: 38px; top: -19px; right: 9px; }

        @keyframes drift {
            from { transform: translateX(-200px); }
            to { transform: translateX(calc(100vw + 200px)); }
        }

        .theme-toggle {
            position: absolute;
            top: 12px;
            background: rgba(255,255,255,0.15);
            color: white;
            padding: 6px 14px;
            border-radius: 50px;
            font-size: 0.82rem;
            font-weight: 600;
            cursor: pointer;
            z-index: 100;
            backdrop-filter: blur(8px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            min-width: 64px;
            text-align: center;
            transition: all 0.4s ease;
        }

        .theme-toggle:hover {
            transform: scale(1.05);
            background: rgba(255,255,255,0.25);
        }

        .theme-toggle { left: 12px; }
        [data-theme="light"] .theme-toggle {
            left: auto; right: 12px;
            background: rgba(0,0,0,0.1);
            color: #2c3e50;
            border-color: rgba(0,0,0,0.2);
        }

        header h1 {
            font-size: 2.2rem;
            margin-bottom: 0.4rem;
            font-weight: 700;
            background: linear-gradient(to bottom, white 60%, var(--gold-star) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);
            letter-spacing: 0.8px;
            line-height: 1.1;
            max-width: 90%;
            margin-left: auto;
            margin-right: auto;
            position: relative;
            z-index: 2;
        }

        [data-theme="light"] header h1 {
            background: linear-gradient(to bottom, #2c3e50 60%, #b8860b 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 1px 4px rgba(0,0,0,0.3);
        }

        header .subtitle {
            font-size: 1rem;
            opacity: 0.95;
            font-style: italic;
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.7);
            margin-bottom: 0.2rem;
            position: relative;
            z-index: 2;
        }
        header .author {
            font-size: 0.9rem;
            opacity: 0.9;
            text-shadow: 0 1px 4px rgba(0, 0, 0, 0.7);
            font-weight: 500;
            position: relative;
            z-index: 2;
        }

        @media (max-width: 480px) and (orientation: portrait) {
            header { height: 200px; min-height: 200px; padding: 1rem 0.8rem; }
            header h1 { font-size: 1.65rem; }
            .theme-toggle { top: 10px; font-size: 0.78rem; padding: 5px 12px; }
        }

        /* === NAVIGATION === */
        nav {
            background-color: var(--nav-bg);
            padding: 0.7rem 1rem;
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 99;
        }
        nav a {
            color: white;
            text-decoration: none;
            font-size: 0.95rem;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        nav a:hover { color: var(--accent-orange); }

        /* === PAGE À PROPOS === */
        .author-page {
            padding: 4rem 1rem;
            max-width: 900px;
            margin: 0 auto;
            text-align: justify;
            line-height: 1.9;
            background: rgba(15,30,47,0.6);
            border-radius: 12px;
            margin-top: 2rem;
            margin-bottom: 3rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        [data-theme="light"] .author-page {
            background: #ffffff;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .author-page img {
            float: right;
            margin: 0 0 20px 20px;
            max-width: 40%;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 2px solid rgba(212,160,23,0.2);
        }

        .author-page h1 {
            text-align: center;
            margin: 2rem 0 1.5rem;
            color: var(--gold-star);
            font-size: 2rem;
            position: relative;
        }
        .author-page h1::after {
            content: ''; position: absolute; bottom: -8px; left: 50%;
            transform: translateX(-50%); width: 70px; height: 3px;
            background: var(--accent-orange); border-radius: 2px;
        }

        @media (max-width: 768px) {
            .author-page img { 
                float: none; 
                max-width: 80%; 
                margin: 0 auto 20px; 
                display: block; 
            }
            .author-page { padding: 2.5rem 1rem; }
        }

        /* === FOOTER === */
        footer {
            background-color: #0b1a2e;
            color: var(--text-muted);
            text-align: center;
            padding: 2.5rem 1rem;
            font-size: .92rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
        }
        [data-theme="light"] footer {
            background-color: #1a3a52;
            color: #bdc3c7;
        }

        .footer-stars {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.8s ease;
            z-index: 0;
        }

        [data-theme="dark"] .footer-stars,
        body:not([data-theme]) .footer-stars {
            opacity: 0.4;
        }

        .footer-star {
            position: absolute;
            color: var(--gold-star);
            font-size: 0.9rem;
            animation: twinkle 4s infinite;
            opacity: 0.6;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="theme-toggle" id="themeToggle">Jour</div>
        <!-- ... étoiles, nuages, titre ... -->
        <h1>Étoiles et Navigation</h1>
        <p class="subtitle">Un petit traité de navigation astronomique</p>
        <p class="author">par Jean-Clément Louche</p>
    </header>

    <!-- Navigation -->
    <nav>
        <a href="#accueil">Accueil</a>
        <a href="a-propos.html">À propos de l’auteur</a>
        <a href="#contact" class="scroll-link">Commander</a>
    </nav>

    <!-- Accueil -->
    <section class="home-section" id="accueil">
        <div class="home-cover">
            <img src="images/couverture.png?v=2025" alt="Couverture du livre">
        </div>
    </section>

    <!-- Visualiser les index -->
    <section class="index-section">
        <div class="container">
            <h2 class="section-title">Visualiser les index</h2>
            <p class="index-hint">Pour visualiser le contenu d’un index, cliquez sur l’image correspondante</p>
            <div class="extraits-grid">
                <!-- Tous les chapitres (inchangés) -->
                <div class="extrait-card">
                    <div class="card-title">Index général<span class="click-hint">Cliquez pour agrandir</span></div>
                    <div class="image-modal"><img src="images/index.png" alt="Index général"></div>
                </div>
                <!-- ... autres chapitres ... -->
            </div>
        </div>
    </section>

    <!-- Visualiser du contenu -->
    <section class="content-section" id="contenu">
        <div class="container">
            <h2 class="section-title">Visualiser du contenu</h2>
            <div class="content-grid">
                <!-- ch1_pg11 en modale -->
                <div class="extrait-card">
                    <div class="card-title">Chapitre 1 – Page 11<span class="click-hint">Cliquez pour agrandir</span></div>
                    <div class="image-modal">
                        <img src="images/ch1_pg11.webp" alt="Chapitre 1 - Page 11">
                    </div>
                </div>
                <!-- Ajouter d'autres pages ici -->
            </div>
        </div>
    </section>

    <!-- PDF interactif -->
    <div class="pdf-note">
        <h4>Une version du livre au format PDF/EPUB interactif sera bientôt disponible</h4>
        <p>
            La version PDF du livre dispose d'une <strong>indexation interactive</strong> qui vous permet de naviguer facilement entre les chapitres. Les <strong>étoiles en bas de chaque page</strong> servent de boutons de navigation : cliquez sur elles pour revenir à l'index général ou naviguer vers d'autres chapitres. Cette fonctionnalité vous offre une expérience de lecture fluide et intuitive, guidée par les astres, comme il se doit pour un livre sur la navigation astronomique.
        </p>
    </div>

    <!-- Contact -->
    <section class="contact-section" id="contact">
        <div class="container">
            <h2 class="section-title">Commander une impression</h2>
            <form action="https://formspree.io/f/mblpzwlq" method="POST">
                <!-- ... formulaire ... -->
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <!-- ... footer ... -->
    </footer>

    <!-- JavaScript -->
    <script>
        // === Theme Toggle ===
        const toggle = document.getElementById('themeToggle');
        const body = document.body;
        const savedTheme = localStorage.getItem('theme') || 'dark';
        if (savedTheme === 'light') {
            body.setAttribute('data-theme', 'light');
            toggle.textContent = 'Nuit';
        } else {
            toggle.textContent = 'Jour';
        }
        toggle.addEventListener('click', () => {
            if (body.hasAttribute('data-theme')) {
                body.removeAttribute('data-theme');
                toggle.textContent = 'Jour';
                localStorage.setItem('theme', 'dark');
            } else {
                body.setAttribute('data-theme', 'light');
                toggle.textContent = 'Nuit';
                localStorage.setItem('theme', 'light');
            }
        });

        // === Modal pour index + contenu ===
        document.querySelectorAll('.extrait-card').forEach(card => {
            const title = card.querySelector('.card-title');
            const modal = card.querySelector('.image-modal');
            title.addEventListener('click', (e) => {
                e.stopPropagation();
                const isActive = card.classList.toggle('active');
                modal.classList.toggle('active', isActive);
            });
            modal.addEventListener('click', (e) => {
                if (e.target === modal || e.target.tagName === 'IMG') {
                    card.classList.remove('active');
                    modal.classList.remove('active');
                }
            });
        });

        // === Scroll fluide pour "Commander" ===
        document.querySelectorAll('.scroll-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const target = document.querySelector(targetId);
                if (target) {
                    window.scrollTo({
                        top: target.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>
</html>
